{
    "version": "2.0.5.1",
    "description": "Duplicati. A backup client that securely stores encrypted, incremental, compressed backups on cloud storage services and remote file servers.",
    "homepage": "https://www.duplicati.com",
    "license": "LGPL-2.1-only",
    "suggest": {
        "Visual C++ Redistributable for Visual Studio 2015": "vcredist2015"
    },
    "url": "https://updates.duplicati.com/beta/duplicati-2.0.5.1_beta_2020-01-18.zip",
    "hash": "168aa8b6162586a8a16489e4ac2beece5e14e678bb01c4afcf37fbfb708482f6",
    "pre_install": "if (-not (is_admin)) { throw 'This package requires admin privileges to install' }",
    "installer": {
        "file": "Duplicati.WindowsService.exe",
        "args": [
            "install",
            "--portable-mode"
        ],
        "keep": true
    },
    "post_install": "Start-Service Duplicati",
    "uninstaller": {
        "script": [
            "if (-not (is_admin)) { throw 'This package requires admin privileges to uninstall' }",
            "Invoke-ExternalCommand -FilePath \"$dir\\Duplicati.WindowsService.exe\" -ArgumentList 'uninstall'"
        ]
    },
    "bin": [
        "Duplicati.CommandLine.exe",
        "Duplicati.CommandLine.BackendTester.exe",
        "Duplicati.CommandLine.BackendTool.exe",
        "Duplicati.Library.Snapshots.exe",
        "Duplicati.CommandLine.RecoveryTool.exe"
    ],
    "shortcuts": [
        [
            "Duplicati.GUI.TrayIcon.exe",
            "Duplicati",
            "--no-hosted-server"
        ]
    ],
    "persist": "data",
    "checkver": {
        "url": "https://updates.duplicati.com/beta/latest.json",
        "jsonpath": "$.zip",
        "regex": "duplicati-(?<version>[\\d.]+)(?<suffix>.+)\\.zip"
    },
    "autoupdate": {
        "url": "https://updates.duplicati.com/beta/duplicati-$version$matchSuffix.zip",
        "hash": {
            "mode": "json",
            "url": "https://updates.duplicati.com/beta/latest.json",
            "jsonpath": "$.zipsha256"
        }
    }
}
